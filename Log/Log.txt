Pre Log
最近我在阅读凯文凯利的《失控》，其中关于“生命是一种混乱系统涌现出来的现象”的理论让我很感兴趣。
反正最近的项目进展很不爽，而作为程序猿的我不能就这样当一个毫无用途的“产品助理”，那样我会屎了的……
所以我决定开启一个小实验，就用开发电脑xp笔记本+Eclipse+JAVA applet 来“创造”一种类似生命的玩意。打发时间而已。

项目依托于之前做的一个项目（基于人工神经网络教程的雾霾预测）和一个用来锻炼JAVA编程技术的小玩意“万有引力”（就是一个利用Applet画图的玩意）。 主要构思是这样的：
设想有一种生物，其具有一定数量的神经元组成的简单神经网络。并且该神经网络系统作为其遗传基因。
这种生物有以下基本属性：
（从辐射偷来的）S.P.E.C.I.A.L 7项基本属性。（将来会）分别决定生物的攻击力、感知力、魅力、智能等能力。
生物是2D世界的，他们的宇宙只有800*800像素。
生物在2D世界具有以下参数： 位置xy,速度vx vy
这些生物具有一个会随时间减少的“生命”
这些生物可以通过“捕食”来获取生命
这些生物可以通过“交配”来繁衍下一代
交配时会进行基因有丝分裂，同时会以一定的概率进行变异。

我想指定一个简单的初始规则，让这些“生物（我叫它们goo）”自生自灭去。
以下是初次实验的一些简单记录，更多详细的信息当时没记，就算了。

0）纯调试，让这个小宇宙能够运行起来。
1）世界具有边界。 神经网络输出仅仅作为新的速度分量。生物不会繁殖和捕食。
结果： 小生物们没头苍蝇似的乱跑，并且基本不会拐弯（神经网络输出趋于一个常数，不会变）。 所以很快，小生物们就都堆在容器边缘了。时间一到全部集体饿死，相当无趣。
 
2）加入了繁殖机制和捕食机制。 设置了一些繁殖和捕食的限制。生物可以自动“搜索”距离自己最近的目标（使用了map region的分区机制，可以让搜索Target不至于那么慢）。繁殖和捕食是无节制的，符合条件就进行。
结果：小家伙们非常喜欢繁殖，很快就把机器搞爆了（OOM）我试了各种方式奖励捕食而惩罚繁殖（比如捕食后生命恢复、交配后生命损失）依然无法压抑生物繁殖的欲望。不是过快的全部灭绝，就是把机器搞爆。
我又设置了生殖间隔（MATE_INTERVAL）和捕食间隔（EAT_INTERVAL），每次捕食和交配后都要等待相应长的冷却时间。以此调节种群数量。然而结果依然很难控制。
我不想设置一个“ＭＡＸ＿ＣＮＴ”用来限制种群数量。上帝不会那样做，他会怎么做呢？
他什么都不会做！
他的宇宙有一个“条件”：资源有限。
好吧，我设置了一个小算法，让生物的繁殖成功概率随种群数量变化。　数量少时会加强繁殖成功率，数量多时会降低。种群数量超过最大值goocnt时，则完全禁止繁殖。
这样还不够，种群总是增长到goocnt后保持在其附近波动。
那么制造个大灾变怎么样？ 超过种群最大数量后产生饥荒，生命衰减加速！超出的越多，死得越快！

最后的结果：会周期地触及goocnt，然后大饥荒跌到一半人口，随后复苏――再暴增――再饥荒――再复苏……
最后，我让神经网络输出来决定本次是否捕食，是否交配。

最后的参数
	goocnt=3000;
	WINNER_CNT=20;//保留每次最后20个个体，放入下一次循环。保证优质基因的传承
	MUTANT_STEP = 0.2d;
	MUTANT_RATE = 0.3d;
	MAX_LIFE = 2000;
	MATE_INTERVAL = 150; 
	int EAT_INTERVAL = 50;  
	MAX_SPEED_VEC = 0.5f;
	EAT_RESTORE_LIFE = 500;
神经网络输入：自身坐标，自身速度 ， 最近目标坐标， 最近目标速度，自己和对方的special属性
输出： 速度分量

goo们的表现：
一开始大家乱吃一通，快速将种群数量吃到一半。然后开始繁殖。
MATE_INTERVAL>=200时,种群很快灭绝 
MATE_INTERVAL<=150时，种群中偶尔会出现核心。然后会围绕核心快速繁殖。在核心内部自行交配和捕食，但种群数量会持续增长至最大值。

偶尔会有一两个大个头（繁殖后个体的STR会有随机变化，在捕食时具有优势）的个体因为捕食很多而获得很长的寿命。他们会追着快速增值的种群（我叫它羊群）一直贪婪地吃啊吃。直到撞到并帖在屏幕边缘。

最后的场景很像草原： 海量的，缺少攻击意愿的种群，依靠自我繁殖维持一个相当规模的群体。他们的数量是有压倒性优势的。 他们的逻辑就是“生、生、生”
极少数量的个体具备很强的攻击性，如果凑巧跟随羊群附近，则也可以维持下去。但是由于缺少个体，基因很难传承下去，当环境变化（附近没有羊群）就会灭绝。


Log 2016-01-11
溜边的方式太无趣了，所以我觉定让这个宇宙更加残酷： 掉到屏幕边缘的goo会立刻死掉！
另外，让神经网络输出速度的变量，而不是速度本身，可能更有意思。

可能我给这群小家伙的参数太多了，他们很难涌现出足够有趣的行为，所以我觉得“分级”来训练他们，帮助他们进化的“有趣一些”。

第一步： 先让他们尝试在这个残酷的宇宙中活下来！ 没有食物、没有捕食、没有繁殖，只是活下来。
	这样的遗传训练迭代只需要几代，他们就会用一种“在屏幕中心画圈”（准确地说是椭圆）的方式来保留自己。
	群体的行为有点像海里的鱼群。感觉像个旋风。
	（注：试试输出速度本身。 结果活下来的是不爱运动的懒鬼！）
	本步骤获得了生物样本：learn_not_drop_weight，  准确地说这不是一个生物样本。只是一种预置的神经训练。

第二步：没有食物的世界缺少刺激。 第一步的群体只会在画面中心绕圈。所以我又添加了食物。
	食物是一种特殊的goo， STR=0，只有被吃的命，且不会逃跑。默认产生500个，每个迭代会自动补满，随机分布在世界中。
	同样用第一种方式从随机样本开始训练。过程中产生了几种不同的物种。有一种缓慢满屏绕圈的；有一种喜欢在原地快速绕圈的。 最后前者占据了优势。可能这样可以最大化利用所有食物。不至于扎堆吃光所有食物。你看，一种“策略”就这样“涌现”出来了。	
	在训练的过程中。一度出现他们集中在屏幕一边或中心。导致屏幕另一半或角落的食物总是吃不到。但慢慢地，画的圈越来越大，分布越来越均匀，最后几乎最大化地利用了所有食物。
	最后得到的基因为weight_foodOnly_2016-01-11， 我想这个优于第一步的基因，可以作为后续生物样本的基本基因。

第三步： 把第二步训练出来的样本基因和随机基因按照3:1的比例放入容器。 其ID为负。
	这次开启了捕食和繁殖机制。世界变得更加残酷了！
	捕食的限制：不允许捕食自己的子女。
	繁殖的限制：不允许父代与子代乱伦（-_-|||）
	果然训练过的基因可以快速存活下来。并且又涌现出了新的行为：他们会躲避和追猎了！
	如果目标锁定了食物和比自己弱小的个体，则会快速接近并捕食。如果是势均力敌或遇到强敌，则尝试保持距离。
	有时能看到两个体型一样的家伙在互相对峙，就像摔跤的选手。
	最后得到的样本为S02.  
	他们具有较强的攻击性，知道欺软怕硬。 但繁殖意愿一般，最终会导致种群灭绝。如果缩短繁殖间隔不知会是什么结果。


